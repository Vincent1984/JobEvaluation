# 职位分类管理UI重新设计

## 🎯 设计目标

参照企业管理页面的样式，重新设计职位分类管理UI，实现：
1. 使用expander实现折叠展示
2. 不显示父级ID
3. 第三层级展示标签信息
4. 第三层级添加"添加标签"按钮

## ✨ 新UI特性

### 1. 折叠展示
使用`st.expander`实现分类的折叠展开：
- 第一层级默认展开
- 第二、三层级默认折叠
- 点击可展开/折叠

### 2. 分类信息显示

#### 第一层级
```
📁 技术类 (L1)  [可折叠]
├─ ID: cat_xxx
├─ 描述: 技术相关岗位
└─ [✏️ 编辑] [🗑️ 删除]
```

#### 第二层级
```
  📂 研发工程师 (L2)  [可折叠]
  ├─ ID: cat_yyy
  ├─ 描述: 软件研发相关岗位
  └─ [✏️ 编辑] [🗑️ 删除]
```

#### 第三层级（带标签）
```
    📄 Python后端工程师 (L3) | 🏷️ 高战略重要性, 高技能稀缺性  [可折叠]
    ├─ ID: cat_zzz
    ├─ 描述: Python后端开发岗位
    ├─ 样本JD: 1 个
    │   - jd_sample_001
    ├─ 标签 (2)
    │   🏷️ 高战略重要性 (战略重要性)
    │      该岗位对企业战略目标实现具有重要影响...
    │   🏷️ 高技能稀缺性 (技能稀缺性)
    │      该岗位所需技能在市场上较为稀缺...
    └─ [✏️ 编辑] [🏷️ 添加标签] [🗑️ 删除]
```

### 3. 标签显示优化

#### 在expander标题中显示标签预览
- 显示前2个标签名称
- 超过2个显示"+N"
- 格式：`| 🏷️ 标签1, 标签2 +1`

#### 在展开内容中显示完整标签列表
- 显示所有标签
- 每个标签显示：名称、类型、描述
- 使用`st.caption`显示描述（灰色小字）

### 4. 添加标签功能

#### 按钮位置
- 仅在第三层级显示"🏷️ 添加标签"按钮
- 位于"✏️ 编辑"和"🗑️ 删除"之间

#### 添加流程
1. 点击"🏷️ 添加标签"按钮
2. 在当前expander内显示添加表单
3. 填写标签信息：
   - 标签名称*
   - 标签类型*（下拉选择）
   - 标签描述*
4. 点击"✅ 添加"或"❌ 取消"

## 📋 完整UI布局

```
🗂️ 职位分类管理

[企业选择器]
✅ 当前管理企业: 科技有限公司

─────────────────────────────────────

📊 分类树

📁 技术类 (L1) ▼
┌─────────────────────────────────┬──────────┐
│ ID: cat_001                     │ ✏️ 编辑  │
│ 描述: 技术相关岗位              │ 🗑️ 删除  │
└─────────────────────────────────┴──────────┘

  📂 研发工程师 (L2) ▼
  ┌─────────────────────────────────┬──────────┐
  │ ID: cat_002                     │ ✏️ 编辑  │
  │ 描述: 软件研发相关岗位          │ 🗑️ 删除  │
  └─────────────────────────────────┴──────────┘

    📄 Python后端工程师 (L3) | 🏷️ 高战略重要性, 高技能稀缺性 ▼
    ┌─────────────────────────────────┬──────────────┐
    │ ID: cat_003                     │ ✏️ 编辑      │
    │ 描述: Python后端开发岗位        │ 🏷️ 添加标签  │
    │ 样本JD: 1 个                    │ 🗑️ 删除      │
    │   - jd_sample_001               │              │
    │                                 │              │
    │ 标签 (2)                        │              │
    │ 🏷️ 高战略重要性 (战略重要性)   │              │
    │    该岗位对企业战略目标...      │              │
    │ 🏷️ 高技能稀缺性 (技能稀缺性)   │              │
    │    该岗位所需技能在市场上...    │              │
    └─────────────────────────────────┴──────────────┘
    
    [点击"添加标签"后显示表单]
    ─────────────────────────────────
    ➕ 添加新标签
    
    标签名称*: [                    ]
    标签类型*: [战略重要性 ▼]
    标签描述*: [                    ]
    
    [✅ 添加] [❌ 取消]
```

## 🎨 视觉改进

### 1. 层级区分
- 使用图标：📁 (L1) / 📂 (L2) / 📄 (L3)
- 使用缩进：一级无缩进，二级2个空格，三级4个空格
- 使用expander实现折叠

### 2. 信息精简
- ❌ 不显示父级ID（层级关系通过缩进体现）
- ✅ 显示分类ID、描述
- ✅ 第三层级显示样本JD和标签

### 3. 标签展示
- 在标题中预览标签（最多2个）
- 在内容中显示完整标签列表
- 使用caption显示描述（灰色小字）

### 4. 按钮布局
- 所有按钮使用`use_container_width=True`
- 第三层级多一个"🏷️ 添加标签"按钮
- 表单按钮分两列：添加/取消

## 💡 用户体验改进

1. **清晰的层级关系**
   - 通过缩进和图标直观显示
   - 不需要显示父级ID

2. **便捷的标签管理**
   - 标题中预览标签
   - 一键添加标签
   - 表单内嵌在expander中

3. **灵活的折叠展开**
   - 默认展开第一层级
   - 其他层级可按需展开
   - 减少页面滚动

4. **统一的设计风格**
   - 与企业管理页面保持一致
   - 使用相同的expander样式
   - 按钮布局统一

## 🧪 测试要点

1. 折叠展开功能正常
2. 标签在标题中正确显示
3. 第三层级显示"添加标签"按钮
4. 点击按钮显示添加表单
5. 添加标签后自动刷新
6. 取消按钮关闭表单

刷新浏览器即可看到新的UI设计！
